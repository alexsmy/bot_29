# bot_29-main/server_logger_config.py

"""
ПУЛЬТ УПРАВЛЕНИЯ СЕРВЕРНЫМИ ЛОГАМИ

Этот файл позволяет гибко настраивать, какие события будут записываться
в файл app.log и/или выводиться в консоль Render.

- console: true -> сообщение будет выведено в консоль (stdout).
- file:    true -> сообщение будет записано в файл app.log.

Вы можете включать и отключать логи по категориям, чтобы сосредоточиться
на конкретной проблеме или уменьшить "шум" в логах на продакшене.
"""

LOG_CONFIG = {
    # ========================================================================
    # == ОБЯЗАТЕЛЬНЫЕ ЛОГИ ==
    # Эти логи критически важны для понимания жизненного цикла и состояния
    # приложения. Отключать их запись в файл крайне не рекомендуется.
    # ========================================================================
    "MANDATORY": {
        # Критические ошибки, которые приводят к остановке или некорректной работе
        "CRITICAL":             { "console": True,  "file": True  },
        # Запуск, остановка, установка ключевых компонентов (бот, БД)
        "APP_LIFECYCLE":        { "console": True,  "file": True  },
        # Блокировка пользователя за спам или другие нарушения
        "USER_BLOCK":           { "console": True,  "file": True  },
        # Ошибки, которые не приводят к остановке, но требуют внимания
        "ERROR":                { "console": True,  "file": True  },
    },

    # ========================================================================
    # == ФУНКЦИОНАЛЬНЫЕ ЛОГИ ==
    # Логи, описывающие работу основных модулей. Полезны для отслеживания
    # штатного поведения и отладки конкретных функций.
    # ========================================================================
    "FUNCTIONAL": {
        # Жизненный цикл базы данных: создание пула, инициализация, закрытие
        "DB_LIFECYCLE":         { "console": False, "file": True  },
        # Установка команд бота, регистрация обработчиков
        "BOT_SETUP":            { "console": False, "file": True  },
        # Создание, восстановление, закрытие комнат для звонков
        "ROOM_LIFECYCLE":       { "console": False, "file": True  },
        # Подключение и отключение пользователей от WebSocket
        "WEBSOCKET_LIFECYCLE":  { "console": False, "file": True  },
        # Отправка уведомлений администратору
        "NOTIFICATION":         { "console": False, "file": True  },
        # Работа API Groq: начало и завершение транскрипции, слияния, пересказа
        "GROQ_API":             { "console": False, "file": True  },
        # Сборка аудио-чанков в один файл
        "ASSEMBLER":            { "console": False, "file": True  },
        # Загрузка и применение настроек из admin_settings.jsonc
        "SETTINGS":             { "console": False, "file": True  },
        # Действия администратора в админ-панели (удаление, очистка)
        "ADMIN_ACTION":         { "console": True,  "file": True  },
        # Логи, полученные от клиентской части (из браузера)
        "CLIENT_LOG":           { "console": False, "file": True  },
    },
    
    # ========================================================================
    # == ДЕБАГ-ЛОГИ (ОТЛАДОЧНЫЕ) ==
    # "Шумные" или часто повторяющиеся логи. Включайте их только
    # при необходимости детальной отладки конкретного аспекта.
    # В продакшене рекомендуется держать их выключенными.
    # ========================================================================
    "DEBUG": {
        # Запросы к внешнему API для определения геолокации по IP
        "IP_API":               { "console": True, "file": True },
        # Работа задачи keep_alive, которая "будит" приложение
        "KEEP_ALIVE":           { "console": True, "file": True },
        # Любое сообщение от пользователя, которое не является командой
        "UNHANDLED_MESSAGE":    { "console": False, "file": False },
        # Попытка неавторизованного доступа к админ-командам
        "AUTH_ATTEMPT":         { "console": False, "file": True  },
        # Обработка событий WebSocket (получение offer, answer, candidate)
        "WEBSOCKET_EVENT":      { "console": False, "file": False },
    }
}